<div class="page-width">
  <div class="grid">
    <div class="grid__item medium-up--five-sixths medium-up--push-one-twelfth">
      
      <div class="section-header text-center">
        <h1>{{ page.title }}</h1>
        
        {% if customer %}
          <div style="margin-bottom: 30px;">
            <a href="/pages/game" class="btn" style="background: #d92828; color: white; padding: 15px 40px; font-size: 18px; font-weight: bold; text-decoration: none; border-radius: 5px;">
              üê∫ ENTER THE ARENA (PLAY GAME)
            </a>
          </div>
        {% endif %}
      </div>

      <div class="rte">
        {% unless customer %}
          <div style="text-align: center; padding: 50px; background: #f4f4f4;">
            <h2>Welcome to the Wolfpack</h2>
            <p>Please log in to view the leaderboard and play.</p>
            <a href="/account/login" class="btn">Login</a>
          </div>
        {% endunless %}

        {% if customer %}
          <div id="root-game" style="min-height: 600px; width: 100%;">
            <p style="text-align: center; color: #999;">Loading Leaderboard...</p>
          </div>
        {% endif %}

        <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
        <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
        <link rel="stylesheet" href="{{ 'main.css' | asset_url }}">
        <link rel="stylesheet" href="{{ 'game-app-styles.css' | asset_url }}">

        <script>
          (function() {
            var bundleUrl = "{{ 'game-app-bundle.js' | asset_url }}";
            var baseUrl = bundleUrl.split('game-app-bundle.js')[0];
            if (baseUrl.indexOf('//') === 0) baseUrl = 'https:' + baseUrl;
            var currentPath = window.location.pathname;

            window.shopifyCdnPath = baseUrl;
            window.__webpack_public_path__ = baseUrl;
            
            var isLoggedIn = {% if customer %}true{% else %}false{% endif %};
            var userData = null;
            if (isLoggedIn) {
               userData = { id: "{{ customer.id }}", email: "{{ customer.email }}", name: "{{ customer.name }}" };
            }

            window.pwaThemeVariables = {
              assetsUrl: baseUrl,
              publicPath: baseUrl,
              vendorPath: baseUrl + "vendor.js",
              cssPath: baseUrl + "main.css",
              logoPath: baseUrl + "wolfpack-logo.png",
              
              isAuthenticated: isLoggedIn,
              user: userData,
              
              // CONFIG FOR LOBBY
              gamePageHandle: 'gameboard-leaderboard-1',
              routes: {
                home: currentPath,
                dashboard: currentPath, // THIS page is the dashboard
                game: '/pages/game',    // Link to the Arena
                leaderboard: currentPath
              }
            };
          })();
        </script>
        <script src="{{ 'game-app-bundle.js' | asset_url }}" type="module"></script>
      </div>
    </div>
  </div>
</div>
